<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    
    <title>Our English - Games Management</title>
    
    <!-- ====== Styles ====== -->
    <link rel="stylesheet" href="indexStyle.css" />
  </head>

  <body>
    <!-- Head -->
    <div id="header">
      <h2 id="header-title">
        <span id="header-title-text">Games</span>
        <span id="item-count">(0)</span>
      </h2>
      
      <div id="header-actions">
        <button id="panel-toggle-btn"></button>
      </div>
    </div>
    
    <!-- Table -->
    <table id="item-table">
      <thead id="thead-games">
        <tr>
          <th>#</th>
          <th>ACTIONS</th>
          <th>VERSION NUMBER</th>
          <th>GAME TITLE</th>
          <th>ACTIVE</th>
          <th>LEVELS</th>
          <th>LAST UPDATED</th>
          <th>UPDATED BY</th>
        </tr>
      </thead>

      <thead id="thead-admins" class="hidden">
        <tr>
          <th>#</th>
          <th>ACTIONS</th>
          <th>USERNAME</th>
          <th>FIRSTNAME</th>
          <th>LASTNAME</th>
          <th>E-MAIL</th>
          <th>ROLE</th>
          <th>ACTIVE</th>
        </tr>
      </thead>
      
      <tbody id="item-tbody">
        <!-- rows generated by JS -->
      </tbody>
    </table>

    <div id="footer">
      <!-- Left: rows per page -->
      <div class="footer-left">
        <span>Rows per page:</span>
        <select id="rows-per-page">
          <option value="5">5</option>
          <option value="10" selected>10</option>
          <option value="25">25</option>
        </select>
      </div>

      <!-- Middle: range -->
      <div class="footer-middle">
        <span id="row-range">1‚Äì5 of 5</span>
      </div>

      <!-- Right: pagination arrows -->
      <div class="footer-right">
        <button class="page-icon" id="first-page">‚ü™</button>
        <button class="page-icon" id="prev-page">‚ü®</button>
        <button class="page-icon" id="next-page">‚ü©</button>
        <button class="page-icon" id="last-page">‚ü´</button>
      </div>
    </div>

    <!-- ====== Action Confirmation Modal ====== -->
    <div id="action-modal" class="modal hidden">
      <div class="modal-backdrop"></div>

      <div class="modal-card">
        <div class="modal-content">
          <h3 id="modal-title">Confirm Action</h3>
          <p id="modal-desc" class="modal-desc"></p>

          <!-- Password -->
          <div class="password-wrapper">
            <!-- Hidden (password) -->
            <input
              type="password"
              id="modal-password"
              class="password-field"
              placeholder="Enter admin password"
              autocomplete="current-password"
            />

            <!-- Visible (text) -->
            <input
              type="text"
              id="modal-password-text"
              class="password-field is-hidden"
              placeholder="Enter admin password"
              autocomplete="off"
            />

            <button
              type="button"
              id="toggle-password"
              class="toggle-password"
              aria-label="Toggle password visibility"
              data-visible="false"
            >
              <span class="icon-eye">üëÅ</span>
              <span class="icon-eye-off">‚å£</span>
            </button>
          </div>
          <div id="modal-password-error" class="modal-error hidden">
            Incorrect password.
          </div>

          <!-- Awareness -->
          <label class="modal-awareness">
            <input type="checkbox" id="modal-aware" />
            I understand this change will immediately affect the real-time experience for all users.
          </label>

          <!-- Buttons -->
          <div class="modal-actions">
            <button id="modal-cancel">Cancel</button>
            <button id="modal-confirm" class="danger" disabled>
              Confirm
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- ====== Scripts ====== -->
    <script src="gamesPanel/games.js"></script>
    <script src="gamesPanel/gamesManagement.js"></script>
    <script src="adminsPanel/admins.js"></script>
    <script src="adminsPanel/adminsManagement.js"></script>
    
    <script>
      // Variables
      const ADMIN_PASSWORD = "admin123";
      let currentPage = 1;
      let rowsPerPage = 10;
      let pendingAction = null;
      
      // Toggle panel button
      const panel = new URLSearchParams(location.search).get("panel") || "games";
      const togglePanelBtn = document.getElementById("panel-toggle-btn");
      const headerTitle = document.getElementById("header-title-text");
      const itemCount = document.getElementById("item-count");
      const theadGames = document.getElementById("thead-games");
      const theadAdmin = document.getElementById("thead-admins");


      if (panel === "games") {
        togglePanelBtn.textContent = "Admins Management";
        togglePanelBtn.onclick = () => {
          location.href = "index.html?panel=admins";
        };
        document.title = "Our English - Games Management";
        headerTitle.textContent = "Games ";
        itemCount.textContent = `(${games.length})`;
        theadGames.classList.remove("hidden");
        theadAdmin.classList.add("hidden");
      } else {
        togglePanelBtn.textContent = "Games Management";
        togglePanelBtn.onclick = () => {
          location.href = "index.html?panel=games";
        };
        document.title = "Our English - Admins Management";
        headerTitle.textContent = "Admins ";
        itemCount.textContent = `(${admins.length})`;
        theadGames.classList.add("hidden");
        theadAdmin.classList.remove("hidden");
      }
    </script>
  </body>
</html>